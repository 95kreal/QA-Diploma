# План автоматизации тестирования веб-сервиса "Путешествие дня"

<table>
    <thead>
Таблица 1 - Статусы и данные карт
            <tr>
                <th colspan="3">Статусы и данные карт</th>
            </tr>
    </thead>
	<tbody>
		<tr>
			<td rowspan="5" align="center">APPROVED</td>
			<td align="center">Номер карты</td>
			<td align="center" >4444 4444 4444 4441</td>
		</tr>
		<tr>
			<td align="center">Месяц</td>
			<td align="center">09</td>
		</tr>
		<tr>
			<td align="center">Год</td>
			<td align="center">25</td>
		</tr>
		<tr>
			<td align="center">Владелец</td>
			<td align="center">Pyotr Tchaikovsky</td>
		</tr>
		<tr>
			<td align="center">CVC/CVV</td>
			<td align="center">159</td>
		</tr>
		<tr>
			<td rowspan="5" align="center">DECLINED</td>
			<td align="center">Номер карты</td>
			<td align="center">4444 4444 4444 4442</td>
		</tr>
		<tr>
			<td align="center">Месяц</td>
			<td align="center">09</td>
		</tr>
		<tr>
			<td align="center">Год</td>
			<td align="center">25</td>
		</tr>
		<tr>
			<td align="center">Владелец</td>
			<td align="center">Pyotr Tchaikovsky</td>
		</tr>
		<tr>
			<td align="center">CVC/CVV</td>
			<td align="center">159</td>
		</tr>
	</tbody>
</table>

## Перечень автоматизируемых сценариев:

- ### Тестирование UI

1. Переход с главной страницы сервиса покупки тура к странице покупки с помощью обычной оплаты.
   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить`

*Ожидаемый результат:* Осуществляется переход на страницу обычной покупки.

2. Переход с главной страницы сервиса покупки тура к странице покупки в кредит.
    1. Открыть главную страницу сервиса http://localhost:8080/
    2. Нажать кнопку `Купить в кредит`

*Ожидаемый результат:* Осуществляется переход на страницу покупки в кредит.

3. Переход со страницы покупки тура с помощью обычной оплаты к странице покупки в кредит.
   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить`
   3. Нажать кнопку `Купить в кредит`
   
*Ожидаемый результат:* Осуществляется переход на страницу покупки в кредит.

4. Переход со страницы покупки тура в кредит к странице покупки с помощью обычной оплаты.
    1. Открыть главную страницу сервиса http://localhost:8080/
    2. Нажать кнопку `Купить в кредит`
    3. Нажать кнопку `Купить`

*Ожидаемый результат:* Осуществляется переход на страницу обычной покупки.

5. Покупка тура на вкладке `Купить` с главной страницы сервиса.


   5.1 Успешная покупка с помощью карты, на которой достаточно ДС на счёте
   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить`
   3. Заполнить все поля валидными данными (Таблица 1, раздел APPROVED)
   4. Нажать кнопку `Продолжить`
   
   *Ожидаемый результат:* Форма отправляется. В правом верхнем углу появляется поп-ап с текстом "**Успешно** Операция одобрена банком."


   5.2 Отказ в покупке при оплате с карты, на которой недостаточно ДС
   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить`
   3. Заполнить все поля валидными данными (Таблица 1, раздел DECLINED)
   4. Нажать кнопку `Продолжить`

   *Ожидаемый результат:* Форма не отправляется. В правом верхнем углу появляется поп-ап с текстом "**Ошибка** Ошибка! Банк отказал в проведении операции."

6. Покупка тура на вкладке `Купить в кредит` с главной страницы сервиса.


6.1 Успешная покупка в кредит с помощью карты, на которой достаточный кредитный лимит
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку `Купить в кредит`
3. Заполнить все поля валидными данными (Таблица 1, раздел APPROVED)
4. Нажать кнопку `Продолжить`

*Ожидаемый результат:* Форма отправляется. В правом верхнем углу появляется поп-ап с текстом "**Успешно** Операция одобрена банком."

6.2 Отказ в покупке при оплате с карты, на которой недостаточный кредитный лимит
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку `Купить в кредит`
3. Заполнить все поля валидными данными (Таблица 1, раздел DECLINED)
4. Нажать кнопку `Продолжить`

*Ожидаемый результат:* Форма не отправляется. В правом верхнем углу появляется поп-ап с текстом "**Ошибка** Ошибка! Банк отказал в проведении операции."

#### Проверка полей формы
- При проверке полей, все поля, кроме проверяемого, заполнить валидными данными (Таблица 1)
- После заполнения формы нажать кнопку `Продолжить`

1. Поле `Номер карты`

   1.1 Пустое поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   1.2 1 цифра в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   1.3 15 цифр в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   1.4 Номер карты, которой нет в БД, *например 4444 4444 4444 4443*

   *Ожидаемый результат:* Форма не отправляется. В правом верхнем углу появляется поп-ап с текстом "**Ошибка** Ошибка! Банк отказал в проведении операции."


2. Поле `Месяц`

   2.1 Пустое поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   2.2 Нулевое значение в поле (*00*)

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   2.3 1 цифра в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   2.4 Несуществующий месяц, *например 13*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверно указан срок действия карты"


3. Поле `Год`

   3.1 Пустое поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   3.2 Нулевое значение в поле (*00*)

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Истёк срок действия карты"

   3.3 1 цифра в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   3.4 Год, предшествующий текущему, *например 21*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Истёк срок действия карты"

   3.5 Год, превышающий 5 лет от текущего, *например 28*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверно указан срок действия карты"

   
4. Поле `Владелец`

   4.1 Пустое поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Поле обязательно для заполнения"

   4.2 Одна буква на латинице, *например P*
   
   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.3 Только имя на латинице, *например Pyotr*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.4 3 слова на латинице, *например Pyotr Ilyich Tchaikovsky*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.5 Имя и фамилия на кириллице, *например Пётр Чайковский*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.6 Цифры, *например 1591703*

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.7 Пробел
   
   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Поле обязательно для заполнения"

   4.8 Спецсимволы, *например !"№;%:?*()‰
   
   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   4.9 Разный регистр на латинице, *например PyOtR TcHaIkOvSkY*
   
   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"


5. Поле `CVC/CVV`

   5.1 Пустое поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   5.2 1 цифра в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"

   5.3 2 цифры в поле

   *Ожидаемый результат:* Форма не отправляется. Под полем ошибка "Неверный формат"
   
   5.4 Нулевое значение в поле (*000*)

   *Ожидаемый результат:* Форма отправляется. В правом верхнем углу появляется поп-ап с текстом "**Успешно** Операция одобрена банком."


6. Все поля - пустые  
   *Ожидаемый результат:* Форма не отправляется. Под всеми полями ошибка "Неверный формат".

#### Проверка отображения плейсхолдеров в полях формы

1. Поле `Номер карты`.

   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить` / `Купить в кредит`
   3. Нажать в поле ввода `Номер карты`

*Ожидаемый результат:* Отображается плейсхолдер с примером, состоящим из 16 цифр.

2. Поле `Месяц`.

   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить` / `Купить в кредит`
   3. Нажать в поле ввода `Месяц`

*Ожидаемый результат:* Отображается плейсхолдер с примером, состоящим из 2 цифр от 01 до 12.

3. Поле `Год`.

   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить` / `Купить в кредит`
   3. Нажать в поле ввода `Год`

*Ожидаемый результат:* Отображается плейсхолдер с примером, состоящим из 2 цифр.

4. Поле `Владелец`.

   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить` / `Купить в кредит`
   3. Нажать в поле ввода `Владелец`

*Ожидаемый результат:* Отображается плейсхолдер с примером, состоящим из имени и фамилии на латинице.

5. Поле `CVC/CVV`.

   1. Открыть главную страницу сервиса http://localhost:8080/
   2. Нажать кнопку `Купить` / `Купить в кредит`
   3. Нажать в поле ввода `CVC/CVV`

*Ожидаемый результат:* Отображается плейсхолдер с примером, состоящим из 3 цифр.

- ### Тестирование API:

Тестовые данные для заполнения и прохождения кейсов - Таблица 1

- #### Тестовые сценарии для `Payment Gate`:

1. POST запрос  по реквизитам APPROVED.

   *Ожидаемый результат:* ответ сервера - код 200 ОК, статус карты - APPROVED

2. POST запрос  по реквизитам DECLINED.

   *Ожидаемый результат:* ответ сервера - код 200 ОК, статус карты - DECLINED

- #### Тестовые сценарии для `Credit Gate`:
1. POST запрос  по реквизитам APPROVED.

   *Ожидаемый результат:* ответ сервера - код 200 ОК, статус карты - APPROVED

2. POST запрос  по реквизитам DECLINED.

   *Ожидаемый результат:* ответ сервера - код 200 ОК, статус карты - DECLINED

## Перечень используемых инструментов с обоснованием выбора:

1. Java 11 - универсальный и один из самых популярных языков программирования с удобной экосистемой и большим набором инструментов для автоматизации тестирования;
2. IntelliJ IDEA - интегрированная среда разработки программного обеспечения для многих языков программирования. На данный момент является самой популярной IDE для языка Java;
3. Docker - проект с открытым исходным кодом для автоматизации развертывания приложений в виде переносимых автономных контейнеров, выполняемых в облаке или локальной среде. В проекте используется для разворачивания БД MySQL и PostgreSQL;
4. Gradle - система автоматической сборки, используемая для упрощения работы с Java;
5. JUnit5 - фреймворк для модульного тестирования программного обеспечения на языке Java;
6. Selenide - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver. Отлично подходит для написания легко читаемых и простых в обслуживании автоматических тестов на Java;
7. Lombok - библиотека для сокращения кода в классах и расширения функциональности языка Java;
8. Java Faker - библиотека для генерации случайных тестовых данных для наших тестов;
9. Git - это система контроля версий, позволяющая отслеживать и фиксировать изменения в коде;
10. Google Chrome - кроссплатформенный веб-браузер, необходимый для запуска авто-тестов и отладки в DevTools.

## Перечень и описание возможных рисков при автоматизации:

1. Из-за отсутствия ТЗ и документации сложно определить, какое поведение системы нужно считать корректным, а какое нет, поэтому в нашем случае тест-дизайн основывается на методе эвристики;
2. Отсутствие уникальных css-селекторов усложняет написание и поддержку актуальности тестов;
3. Трудозатраты на автоматизацию и поддержку актуальности тестов могут превысить экономическую выгоду от её внедрения на проекте.

## Интервальная оценка с учётом рисков (в часах):

1. Написание плана автоматизации тестирования - 16 часов;
2. Подготовка необходимых инструментов, написание, отладка и прогон автотестов - 64 часа;
3. Подготовка отчетной документации, баг-репортов - 24 часа.

## План сдачи работ:
1. Готовность автотестов - 8 рабочих дней, с момента утверждения плана автоматизации тестирования;
2. Результаты прогона автотестов и отчёт по автоматизации - 3 рабочих дня.
